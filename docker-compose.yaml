services:
  server:
    build: ./python
    environment:
      - CHAOS_MODE=true
    ports:
      - "50051:50051"
    command: ["uv", "run", "python", "src/server.py"]

  client:
    build: ./python
    depends_on:
      - server
    environment:
      - SERVER_ADDR=server:50051
    command: ["uv", "run", "python", "src/client.py"]